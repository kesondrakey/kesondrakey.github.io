<!DOCTYPE html>
<html>
<head>
    <title>Weather Calendar</title>
    <style>
        body, div {
            font-family: Arial, sans-serif;
        }
        #calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-gap: 5px;
        }
        .calendar-cell {
            padding: 10px;
            background: linear-gradient(to bottom, #343a54, #232943);
            color: white;
            position: relative;
            min-height: 100px;
            text-align: center;
        }
        .calendar-header, #monthName {
            font-weight: bold;
        }
        #monthName {
            text-align: center;
            color: white;
            margin-bottom: 10px;
            background: none;
            font-size: 24px;
        }
        .info-box {
            display: none;
            background-color: #141414;
            color: white;
            position: absolute;
            right: -220px;
            top: 0;
            z-index: 1;
            width: 220px;
            padding: 10px;
        }
        .calendar-cell:hover .info-box {
            display: block;
        }
        #controls {
            text-align: right;
        }
        small {
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <div id="monthName">September 2023</div>
    <div id="calendar">
        <div class="calendar-header">Sun</div>
        <div class="calendar-header">Mon</div>
        <div class="calendar-header">Tue</div>
        <div class="calendar-header">Wed</div>
        <div class="calendar-header">Thu</div>
        <div class="calendar-header">Fri</div>
        <div class="calendar-header">Sat</div>
    </div>
    <div id="controls">
        <button id="prev">Prev</button>
        <button id="next">Next</button>
    </div>
    <script>
        fetch("../files/daily_fluxtower1.json")
            .then(response => response.json())
            .then(jsonData => {
                const calendarEl = document.getElementById('calendar');

                jsonData.forEach(day => {
                    const cell = document.createElement('div');
                    cell.className = 'calendar-cell';

                    const dayNumber = day.DATE.split('-')[2];
                    cell.innerHTML = `<small>${dayNumber}</small>`;
                    
                    const icon = day.Description === "Sunny" ? "../images/sun.png" : "../images/rain.png";
                    
                    const info = `
                        <div style="display: flex; align-items: center; font-size: 0.9em;">
                            <img src="${icon}" alt="${day.Description}" style="width:30px; height:30px; margin-right:5px;">
                            <div>
                                Max Temp: ${day['Max.Temp']}&#176;F<br>
                                Min Temp: ${day['Min.Temp']}&#176;F
                            </div>
                        </div>
                    `;
                    cell.innerHTML += info;
                    
                    const infoBox = document.createElement('div');
                    infoBox.className = 'info-box';
                    infoBox.innerHTML = `
                        Date: ${day.DATE}<br>
                        Max Temp: ${day['Max.Temp']}&#176;F<br>
                        Min Temp: ${day['Min.Temp']}&#176;F<br>
                        Precipitation: ${day['Total.Precipitation']} in.<br>
                        Soil Moisture: ${day['Avg.Soil.Moisture']}
                    `;
                    cell.appendChild(infoBox);
                    calendarEl.appendChild(cell);
                });
            })
            .catch(error => {
                console.error("Error fetching JSON:", error);
            });
    </script>
</body>
</html>
